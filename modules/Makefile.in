# Copyright (c) 2003-2004 E. Will et al.
# Rights to this code are documented in doc/LICENSE.
#
# This file contains build instructions.
#
# $Id: Makefile.in 8385 2007-06-03 20:33:21Z jilles $
#
include Makefile.defs

default: all

SUBDIRS = alis auth backend botserv chanserv crypto gameserv global memoserv misc nickserv operserv protocol saslserv xmlrpc

all: modules

build: all

install: build
	@for i in $(SUBDIRS); do \
		echo "install ==> $$i"; \
		cd $$i; \
		${MAKE} install || exit; cd ..; \
	done
	-${RM} -f $(DESTDIR)${MODDIR}/modules/userserv/main.so $(DESTDIR)${MODDIR}/contrib/ircd_alis.so

modules:
	@for i in $(SUBDIRS); do \
		echo "build ==> $$i"; \
		cd $$i; \
		${MAKE} build || exit; cd ..; \
	done

.PHONY: depend clean distclean

depend:
	@for i in $(SUBDIRS); do \
		echo "depend ==> $$i"; \
		cd $$i; \
		touch .depend; \
		${MAKE} depend; cd ..; \
	done

clean:
	@for i in $(SUBDIRS); do \
		echo "clean ==> $$i"; \
		cd $$i; \
		${MAKE} clean || exit; cd ..; \
	done

distclean: clean
	@for i in $(SUBDIRS); do \
		echo "distclean ==> $$i"; \
		cd $$i; \
		${MAKE} distclean || exit; cd ..; \
	done
	${RM} -f Makefile Makefile.defs Makefile.common version.c.last .depend
