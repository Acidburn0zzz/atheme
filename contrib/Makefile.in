# Copyright (c) 2003-2004 E. Will et al.
# Rights to this code are documented in doc/LICENSE.
#
# This file contains build instructions.
#
# $Id: Makefile.in 8393 2007-06-03 20:39:46Z pippijn $
#

CC		= @CC@
RM		= @RM@
MV		= @MV@
CP		= @CP@
LN		= @LN@
TAR		= @TAR@
SHELL		= /bin/sh
INSTALL		= @INSTALL@
prefix		= @prefix@
exec_prefix	= @exec_prefix@
datarootdir	= @datarootdir@
bindir		= @bindir@
datadir		= @datadir@
sysconfdir	= @sysconfdir@
libdir		= @libdir@
sbindir		= @sbindir@
localstatedir	= @localstatedir@
DOCDIR		= @DOCDIR@
MODDIR		= @MODDIR@
SHAREDIR	= @SHAREDIR@

# Want absolute paths?
SRCDIR		= .
@ABSPATHS@SRCDIR= @SRCDIR@/contrib

BUILDDIR	= @BUILDDIR@

BIN		= atheme@EXEEXT@

MKDEP		= @MKDEP@ -DPREFIX=\"@prefix@\" -I../include
PICFLAGS	= @PICFLAGS@
CFLAGS		= @CFLAGS@ -I../include

LIBS		= @LIBS@
LDFLAGS		= @LDFLAGS@
CPPFLAGS	= @CPPFLAGS@

default: all

SRCS =					\
	$(SRCDIR)/cs_kickdots.c		\
	$(SRCDIR)/cs_ping.c		\
	$(SRCDIR)/cs_sync.c		\
	$(SRCDIR)/cs_userinfo.c		\
	$(SRCDIR)/gen_echoserver.c	\
	$(SRCDIR)/gen_httpd.c		\
	$(SRCDIR)/gen_listenerdemo.c	\
	$(SRCDIR)/gen_vhostonreg.c	\
	$(SRCDIR)/graphtastical.c	\
	$(SRCDIR)/ircd_alis.c		\
	$(SRCDIR)/ircd_catserv.c	\
	$(SRCDIR)/ircd_nohalfops.c	\
	$(SRCDIR)/ircd_noowner.c	\
	$(SRCDIR)/ircd_noprotect.c	\
	$(SRCDIR)/ns_fregister.c	\
	$(SRCDIR)/ns_generatepass.c	\
	$(SRCDIR)/ns_mxcheck.c		\
	$(SRCDIR)/ns_ratelimitreg.c	\
	$(SRCDIR)/os_pingspam.c		\
	$(SRCDIR)/os_testcmd.c		\
	$(SRCDIR)/os_logonnews.c	\
	$(SRCDIR)/os_logstream.c	\
	$(SRCDIR)/os_tabletest.c

# To compile your own modules, add them to SRCS or make blegh.so
# Note: anope_convert.c cannot be compiled with this Makefile as it is
# an anope module, not an atheme module.

OBJS = ${SRCS:.c=.so}

all: ${OBJS}

install:
	${INSTALL} -d $(DESTDIR)${MODDIR}/contrib
	${INSTALL} -m 755 *.so $(DESTDIR)${MODDIR}/contrib

.SUFFIXES: .so

.c.so:
	${CC} ${PICFLAGS} ${CPPFLAGS} ${CFLAGS} $< -o $@

.PHONY: depend clean distclean
# This sed command sucks but I don't know a better way -- jilles
depend:
	${MKDEP} ${CPPFLAGS} ${CFLAGS} ${SRCS} > .depend

clean:
	${RM} -f *.so

distclean: clean
	${RM} -f Makefile version.c.last

include .depend
